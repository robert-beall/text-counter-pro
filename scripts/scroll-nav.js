class ScrollNavigation{constructor(){this.button=document.getElementById("scroll-nav-btn"),this.svg=this.button.querySelector("svg"),this.textElement=this.button.querySelector(".scroll-nav-text"),this.originalText=this.textElement.textContent,this.detailedStatsHeading=document.getElementById("detailed-stats-heading"),this.heroHeading=document.getElementById("hero-heading"),this.isScrollingDown=!0,this.lastScrollY=0,this.init()}init(){this.button&&this.detailedStatsHeading&&this.heroHeading?(this.setupEventListeners(),this.updateButtonState()):console.warn("ScrollNavigation: Required elements not found")}setupEventListeners(){this.button.addEventListener("click",(()=>this.handleButtonClick()));let t=!1;window.addEventListener("scroll",(()=>{t||(requestAnimationFrame((()=>{this.handleScroll(),t=!1})),t=!0)})),this.button.addEventListener("keydown",(t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.handleButtonClick())}))}handleButtonClick(){const t=this.isScrollingDown?this.detailedStatsHeading:this.heroHeading;if(t){const e=(this.isScrollingDown,110),n=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:n,behavior:"smooth"}),this.isScrollingDown?history.replaceState(null,null,"#detailed-stats-heading"):history.replaceState(null,null,"#hero-heading"),setTimeout((()=>{t.focus({preventScroll:!0})}),500),"vibrate"in navigator&&navigator.vibrate(50)}}handleScroll(){const t=window.scrollY,e=t<this.detailedStatsHeading.getBoundingClientRect().top+window.pageYOffset-.5*window.innerHeight;e!==this.isScrollingDown&&(this.isScrollingDown=e,this.updateButtonState());const n=t+window.innerHeight>=document.documentElement.scrollHeight-100;this.button.classList.toggle("opacity-0",n),this.button.classList.toggle("pointer-events-none",n),this.button.classList.toggle("translate-y-2.5",n),this.lastScrollY=t}updateButtonState(){this.isScrollingDown?(this.textElement.textContent=this.originalText,this.button.setAttribute("aria-label","Scroll to detailed analysis section"),this.svg.classList.remove("rotate-180")):(this.textElement.textContent="Back to Top",this.button.setAttribute("aria-label","Scroll back to page title"),this.svg.classList.add("rotate-180"))}}document.addEventListener("DOMContentLoaded",(()=>{new ScrollNavigation})),window.addEventListener("hashchange",(()=>{const t=window.location.hash;if("#detailed-stats-heading"===t||"#hero-heading"===t){const e=document.querySelector(t);e&&e.focus({preventScroll:!0})}}));